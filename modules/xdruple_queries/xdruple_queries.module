<?php

/**
 * @file keep Drupal hooks implementations
 */

include_once __DIR__ . "/pages/categories.inc";
include_once __DIR__ . "/pages/products_by_category.inc";

/**
 * Implements hook_compass_module()
 *
 * @return \CDD\Compass\DrupalModule
 */
function xdruple_queries_compass_module() {
  return new \CDD\Compass\DrupalModule("xdruple_queries", [
    "xdruple_queries",
  ]);
}

/**
 * Implements hook_menu()
 */
function xdruple_queries_menu() {
  $items = [];
  $items["products/categories"] = [
    "title" => "Categories",
    "page callback" => "xdruple_queries_categories_page",
    "access arguments" => ["xtuple: access product lists"],
    "file" => "pages/categories.inc",
    "type" => MENU_LOCAL_TASK,
  ];
  $items["products/categories/%xdruple_queries_category"] = [
    "title callback" => "xdruple_queries_products_by_category_page_title",
    "title arguments" => [2],
    "page callback" => "xdruple_queries_products_by_category_page",
    "page arguments" => [
      "category" => 2,
      "limit" => "20",
    ],
    "access arguments" => ["xtuple: access product lists"],
    "file" => "pages/products_by_category.inc",
    "type" => MENU_CALLBACK,
  ];
  return $items;
}

/**
 * Implements hook_rescued_resources().
 */
function xdruple_queries_rescued_resources() {
  return [
    "XdCatalog",
    "XdCatalogProduct",
  ];
}

/**
 * Implements hook_extensions_theme()
 *
 * @return array
 */
function xdruple_queries_extensions_theme() {
  return [
    "Xtuple\\XdrupleQueries\\Theme\\CategoriesDropdown",
    "Xtuple\\XdrupleQueries\\Theme\\CategoriesAccordion",
  ];
}
